<div class="results-container">
  <header class="header">
    <div class="center-content">
      <div class="checksec-logo">
        <img src="assets/images/SecCheck.png" alt="CheckSec Logo">
        <h1>CheckSec</h1>
      </div>
      <p class="tagline">Your Security Companion</p>
      <nav>
        <a routerLink="/home">Home</a>
        <a routerLink="/about">About us</a>
        <a routerLink="/contact">Contact Us</a>
      </nav>
    </div>
    <button (click)="logout()" class="logout-button">
      <i class="fas fa-sign-out-alt"></i> Logout
      <img src="assets/images/logout.png" alt="Logout" width="30" height="30">
    </button>
  </header>

  <div class="content">
    <div class="page-header">
      <h1>Security Scan Results</h1>
      <p class="repo-url">Repository: {{ repositoryUrl }}</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Analyzing repository...</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      {{ error }}
      <button *ngIf="repositoryUrl" (click)="retryScans()" class="retry-button">
        Retry Scan
      </button>
    </div>

    <!-- Results Content -->
    <div *ngIf="!loading && !error" class="results-content">
      <!-- SonarCloud Results -->
      <section class="tool-section">
        <h2>SonarCloud Analysis</h2>
        <div class="json-container">
          <pre>{{ scanResults.sonar | json }}</pre>
        </div>
      </section>

      <!-- Snyk Results -->
      <section class="tool-section">
        <h2>Snyk Analysis</h2>
        <div class="json-container">
          <pre>{{ scanResults.snyk | json }}</pre>
        </div>
      </section>

      <!-- Trivy Results -->
      <section class="tool-section" *ngIf="scanResults.trivy.length > 0">
        <h2>Trivy Scan Results</h2>
        <div class="json-container">
          <pre>{{ scanResults.trivy | json }}</pre>
        </div>
      </section>

      <!-- OWASP Results -->
      <section class="tool-section" *ngIf="scanResults.owasp.length > 0">
        <h2>OWASP Analysis</h2>
        <div class="json-container">
          <pre>{{ scanResults.owasp | json }}</pre>
        </div>
      </section>
    </div>

    <!-- Back Button -->
    <button class="back-button" (click)="goBack()">
      <i class="fas fa-arrow-left"></i>
      Back to Dashboard
    </button>
  </div>
</div>
